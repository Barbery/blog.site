<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>部署 on Barbery&#39;s Blog</title>
    <link>http://barbery.me/tags/%E9%83%A8%E7%BD%B2/</link>
    <description>Recent content in 部署 on Barbery&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <lastBuildDate>Wed, 20 Apr 2016 11:18:13 +0000</lastBuildDate>
    <atom:link href="http://barbery.me/tags/%E9%83%A8%E7%BD%B2/feed/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>说说用docker-swarm部署集群的一些问题</title>
      <link>http://barbery.me/post/2016-04-20-%E8%AF%B4%E8%AF%B4%E7%94%A8docker-swarm%E9%83%A8%E7%BD%B2%E9%9B%86%E7%BE%A4%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/</link>
      <pubDate>Wed, 20 Apr 2016 11:18:13 +0000</pubDate>
      
      <guid>http://barbery.me/post/2016-04-20-%E8%AF%B4%E8%AF%B4%E7%94%A8docker-swarm%E9%83%A8%E7%BD%B2%E9%9B%86%E7%BE%A4%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/</guid>
      <description>&lt;p&gt;部署比较简单，这点官网文档说的非常详细，这里我就不重复叙述了，大家可以去看看&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://docs.docker.com/swarm/install-manual/&#34;&gt;https://docs.docker.com/swarm/install-manual/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;说说过程中遇到的问题，也希望后来者可以少踩坑。。。&lt;/p&gt;

&lt;p&gt;首先就是部署前，要把docker engine配置到监听swarm的端口&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;sudo vim /etc/default/docker&lt;/p&gt;

&lt;p&gt;#追加配置到DOCKER_OPTS配置项&lt;/p&gt;

&lt;p&gt;DOCKER_OPTS=&amp;ldquo;-H 0.0.0.0:2375 -H unix:///var/run/docker.sock&amp;rdquo;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;docker的id冲突时需要删掉key文件，重启service就可以重新生成&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt; rm /etc/docker/key.json&lt;/p&gt;

&lt;p&gt;sudo service docker restart&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;还有一个就是discovery服务的话，consul目前还不支持多个节点ip，所以如果你有多个manage的节点也只能连一个consul的节点。。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>