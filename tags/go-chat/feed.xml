<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Go Chat on Barbery&#39;s Blog</title>
    <link>http://barbery.me/tags/go-chat/</link>
    <description>Recent content in Go Chat on Barbery&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <lastBuildDate>Sat, 09 Aug 2014 16:03:00 +0000</lastBuildDate>
    <atom:link href="http://barbery.me/tags/go-chat/feed/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>go-chat 用go&#43;websocket写的一个html聊天组件</title>
      <link>http://barbery.me/post/2014-08-09-go-chat%E7%94%A8go&#43;websocket%E5%86%99%E7%9A%84%E4%B8%80%E4%B8%AAhtml%E8%81%8A%E5%A4%A9%E7%BB%84%E4%BB%B6/</link>
      <pubDate>Sat, 09 Aug 2014 16:03:00 +0000</pubDate>
      
      <guid>http://barbery.me/post/2014-08-09-go-chat%E7%94%A8go&#43;websocket%E5%86%99%E7%9A%84%E4%B8%80%E4%B8%AAhtml%E8%81%8A%E5%A4%A9%E7%BB%84%E4%BB%B6/</guid>
      <description>

&lt;p&gt;最近闲着蛋疼，就折腾下go语言。。。据说go的长连接性能异常高效。。。so，我就用go+html5的websocket搞了个聊天组件玩玩。。。&lt;/p&gt;

&lt;p&gt;经过几天的学习，我对go语言的评价是：快速，性能高效，goroutine很好用。go有着做大型项目的基因。。&lt;/p&gt;

&lt;h3 id=&#34;怎么使用&#34;&gt;怎么使用？&lt;/h3&gt;

&lt;p&gt;把下面的代码放到head标签中&lt;/p&gt;

&lt;div class=&#34;dp-highlighter&#34;&gt;
  &lt;div class=&#34;bar&#34;&gt;
  &lt;/div&gt;

&lt;p&gt;&lt;ol class=&#34;dp-xml&#34;&gt;
    &lt;li class=&#34;alt&#34;&gt;
      &lt;span&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;tag-name&#34;&gt;script&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&#34;attribute&#34;&gt;type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&#34;attribute-value&#34;&gt;&amp;ldquo;text/javascript&amp;rdquo;&lt;/span&gt;&lt;span class=&#34;tag&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt; &lt;li&gt;
        &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span class=&#34;attribute&#34;&gt;window.onload&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span class=&#34;attribute-value&#34;&gt;function&lt;/span&gt;&lt;span&gt;() {&amp;nbsp; &lt;/span&gt;&lt;/span&gt; &lt;li class=&#34;alt&#34;&gt;
          &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var &lt;span class=&#34;attribute&#34;&gt;js&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span class=&#34;attribute-value&#34;&gt;document&lt;/span&gt;&lt;span&gt;.createElement(&amp;ldquo;script&amp;rdquo;);&amp;nbsp; &lt;/span&gt;&lt;/span&gt; &lt;li&gt;
            &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span class=&#34;attribute&#34;&gt;js.type&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span class=&#34;attribute-value&#34;&gt;&amp;ldquo;text/javascript&amp;rdquo;&lt;/span&gt;&lt;span&gt;;&amp;nbsp; &lt;/span&gt;&lt;/span&gt; &lt;li class=&#34;alt&#34;&gt;
              &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span class=&#34;attribute&#34;&gt;js.src&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span class=&#34;attribute-value&#34;&gt;&amp;ldquo;&lt;a href=&#34;http://stutostu.qiniudn.com/app.js&amp;quot;&#34;&gt;http://stutostu.qiniudn.com/app.js&amp;quot;&lt;/a&gt;&lt;/span&gt;&lt;span&gt;;&amp;nbsp; &lt;/span&gt;&lt;/span&gt; &lt;li&gt;
                &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; document.getElementsByTagName(&amp;ldquo;body&amp;rdquo;)[0].appendChild(js);&amp;nbsp; &lt;/span&gt; &lt;li class=&#34;alt&#34;&gt;
                  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; };&amp;nbsp; &lt;/span&gt; &lt;li&gt;
                    &lt;span&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;tag-name&#34;&gt;script&lt;/span&gt;&lt;span class=&#34;tag&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;
                  &lt;/li&gt;&lt;/ol&gt; &lt;/div&gt;
                  &lt;p&gt;
                    更多引入方式，请看：&lt;a title=&#34;https://gist.github.com/Barbery/8f36d999193da2a29ab3&#34; href=&#34;https://gist.github.com/Barbery/8f36d999193da2a29ab3&#34;&gt;&lt;a href=&#34;https://gist.github.com/Barbery/8f36d999193da2a29ab3&#34;&gt;https://gist.github.com/Barbery/8f36d999193da2a29ab3&lt;/a&gt;&lt;/a&gt;
                  &lt;/p&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;              &amp;lt;h3&amp;gt;
                go-chat分为4个频道，分别为：
              &amp;lt;/h3&amp;gt;

              &amp;lt;p&amp;gt;
                &amp;lt;strong&amp;gt;本页面&amp;lt;/strong&amp;gt;：这个频道是根据用户所在页面的url来建立的，不包括url上的？参数和#参数，即&amp;lt;a href=&amp;quot;http://stutostu.com/page1&amp;quot;&amp;gt;http://stutostu.com/page1&amp;lt;/a&amp;gt; 和 &amp;lt;a href=&amp;quot;http://stutostu.com/page1?param1=value1#aa&amp;quot;&amp;gt;http://stutostu.com/page1?param1=value1#aa&amp;lt;/a&amp;gt; 为同一个页面。使用场景：当你只想和访问这个页面的人交流的时候。
              &amp;lt;/p&amp;gt;

              &amp;lt;p&amp;gt;
                &amp;lt;strong&amp;gt;本域名&amp;lt;/strong&amp;gt;：这个频道是根据用户所在页面的域名来建立的，即&amp;lt;a href=&amp;quot;http://www.stutostu.com/page1.html&amp;quot;&amp;gt;http://www.stutostu.com/page1.html&amp;lt;/a&amp;gt; 和 &amp;lt;a href=&amp;quot;http://www.stutostu.com/page2.html&amp;quot;&amp;gt;http://www.stutostu.com/page2.html&amp;lt;/a&amp;gt; 虽然所在页面不同，但是所在域名均为&amp;lt;a href=&amp;quot;http://www.stutostu.com&amp;quot;&amp;gt;www.stutostu.com&amp;lt;/a&amp;gt; ，都可以通过这个频道跨页面进行聊天。使用场景：想和同一个域名的用户交流的时候。
              &amp;lt;/p&amp;gt;

              &amp;lt;p&amp;gt;
                &amp;lt;strong&amp;gt;根域名&amp;lt;/strong&amp;gt;：这个频道是根据用户所在页面的根域名来建立的，即news.stutostu.com和blog.stutostu.com的根域名均为stutostu.com，所以均可通过这个频道进行交流。使用场景：如果你想和这个站的所有人交流的时候
              &amp;lt;/p&amp;gt;

              &amp;lt;p&amp;gt;
                &amp;lt;strong&amp;gt;世界&amp;lt;/strong&amp;gt;：这个范围最大。。。无论在什么页面和域名，均可通过这个频道进行交流。使用场景：如果你想和所有使用go-chat的人交流的时候
              &amp;lt;/p&amp;gt;

              &amp;lt;p&amp;gt;
                &amp;lt;strong&amp;gt;注意：目前只能加入和订阅1个频道，例如你加入了世界频道，那么只能和世界频道的人进行交流，无法接收到其他频道发送的消息，也无法发送消息到其他频道。&amp;lt;/strong&amp;gt;
              &amp;lt;/p&amp;gt;

              &amp;lt;p&amp;gt;
                &amp;amp;nbsp;
              &amp;lt;/p&amp;gt;

              &amp;lt;p&amp;gt;
                源码: &amp;lt;a title=&amp;quot;https://github.com/Barbery/blog/tree/master/go-chat&amp;quot; href=&amp;quot;https://github.com/Barbery/blog/tree/master/go-chat&amp;quot;&amp;gt;https://github.com/Barbery/blog/tree/master/go-chat&amp;lt;/a&amp;gt;
              &amp;lt;/p&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>