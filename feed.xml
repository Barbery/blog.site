<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Barbery&#39;s Blog</title>
    <link>http://barbery.me/</link>
    <description>Recent content on Barbery&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <lastBuildDate>Sun, 19 Mar 2017 21:29:27 +0800</lastBuildDate>
    <atom:link href="http://barbery.me/feed/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>PHP高并发下问题总结</title>
      <link>http://barbery.me/post/2017-03-19-PHP-Summary-of-high-concurrency-issues/</link>
      <pubDate>Sun, 19 Mar 2017 21:29:27 +0800</pubDate>
      
      <guid>http://barbery.me/post/2017-03-19-PHP-Summary-of-high-concurrency-issues/</guid>
      <description>

&lt;p&gt;上周，我们搞了一个活动，没有预想到活动会那么火爆，最高峰的一天有6千万的PV，一周下来累计接近2.6亿的PV。
这么大的流量突然涌入，真是把我们杀个措手不及，最终还是要把接口往GO迁才能扛下来。其中也暴露出了不少问题。&lt;/p&gt;

&lt;h2 id=&#34;phpredis问题&#34;&gt;phpredis问题&lt;/h2&gt;

&lt;h3 id=&#34;超时问题&#34;&gt;超时问题&lt;/h3&gt;

&lt;p&gt;phpredis应该说是大家非常普遍使用的一个redis client，以往在单机redis下使用情况也非常稳定。但是非常遗憾的是，
在redis cluster模式下，phpredis非常不稳定，经常会出现超时的异常错误，例如：&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;RedisClusterException: Timed out attempting to find data in the correct node!&lt;/p&gt;

&lt;p&gt;ErrorException: RedisCluster::setex(): connect() failed: Connection timed out&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;第一个问题的话，是早期的phpredis的一个BUG，使用新的版本或者使用phpredis的develop分支就可以解决了。
我们使用了最新的develop分之后，第一个问题就没再出现了，转而是常常出现问题而这种连接超时的情况，
这个问题暂时不知道如何解决。&lt;/p&gt;

&lt;h3 id=&#34;redis集群负载不均问题&#34;&gt;redis集群负载不均问题&lt;/h3&gt;

&lt;p&gt;使用phpredis还有一个问题是，读取策略的问题，请使用&lt;code&gt;RedisCluster::FAILOVER_DISTRIBUTE_SLAVES&lt;/code&gt;的读取策略，
其他策略例如&lt;code&gt;RedisCluster::FAILOVER&lt;/code&gt;，或者&lt;code&gt;RedisCluster::FAILOVER_DISTRIBUTE&lt;/code&gt;，都会造成整个集群的负载非常不均衡。
使用&lt;code&gt;RedisCluster::FAILOVER&lt;/code&gt;的话会导致redis读写都会发送给redis master机器，导致master和slave负载不均，
如果使用&lt;code&gt;RedisCluster::FAILOVER_DISTRIBUTE&lt;/code&gt;虽然读会随机分发给master和slave，但是我们实际看到，slave机器负载和master的差异还是很大。
目前来看，使用&lt;code&gt;RedisCluster::FAILOVER_DISTRIBUTE_SLAVES&lt;/code&gt;的读取策略是最佳的选择，但是同一个节点下的多个slave机器之间还是会存在负载差异。&lt;/p&gt;

&lt;h3 id=&#34;性能损耗问题&#34;&gt;性能损耗问题&lt;/h3&gt;

&lt;p&gt;phpredis在cluster模式下，有个额外的性能损耗问题，就是每次创建连接的时候，都会去获取一次cluster slots, 而由于
每次获取这个slots都是从seeds里面循环去获取，直至获取到slots信息，所以&lt;code&gt;new RedisCluster(null, $servers)&lt;/code&gt;时，传入的servers中第一个会压力很大，
在高并发的情况下，频发的短链接创建，会直接导致redis集群负载不均，这也是导致了redis集群负载不均的一个原因。&lt;/p&gt;

&lt;p&gt;&amp;ndash;2017年03月21日&amp;ndash; 更新
我看到develop分支下这个问题已经解决了，phpredis会在循环连接seeds之前打乱传入的servers，所以高流量的情况下，
建议填写所有的slave的节点IP进去实例化，这样可以避免单一的节点负载过高。cluster slots消耗过多的问题，已提&lt;a href=&#34;https://github.com/phpredis/phpredis/issues/1133&#34;&gt;issure&lt;/a&gt;给官方，
答复是会在phpredis 3.2的版本中加入缓存cluster slots的功能。&lt;/p&gt;

&lt;h2 id=&#34;阿里云相关&#34;&gt;阿里云相关&lt;/h2&gt;

&lt;p&gt;连接不稳定&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;SQLSTATE[HY000] [2002] php_network_getaddresses: getaddrinfo failed: Name or service not known&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;坑爹阿里云，内网dns解析非常不稳定，大流量的情况下，连自家的RDS地址都不认了，解决办法：把IP地址写入host，缺点是，主从切换时需要手动更新IP。&lt;/p&gt;

&lt;h2 id=&#34;系统其他&#34;&gt;系统其他&lt;/h2&gt;

&lt;p&gt;增大nf_conntrack_max参数，可以增大服务器的并发数&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;sudo sysctl net.nf_conntrack_max=512000&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>记一次redis被黑事件</title>
      <link>http://barbery.me/post/2017-02-19-Redis-hacked/</link>
      <pubDate>Sun, 19 Feb 2017 16:34:55 +0800</pubDate>
      
      <guid>http://barbery.me/post/2017-02-19-Redis-hacked/</guid>
      <description>

&lt;h2 id=&#34;18号事情的经过&#34;&gt;18号事情的经过&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;当天0点多突然接到洪水般的队列报警信息，本应是返回数组的zrangebyscore方法，
返回是一个false的布尔类型，导致爆出了数据异常。当时深夜被报警叫醒，也没考虑太多，只是简单的做了个判断
过滤掉错误的数据。&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;早上9点，接到反馈，项目A微信授权出错。排查代码没有发现有问题，考虑到之前前端有出现上线时丢失文件的情况，
重新部署代码，本地测试故障解除。&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;早上10点，接到redis队列报警信息（Timed out attempting to find data in the correct node! ）&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;早上11点，接到反馈，项目B无法登陆，开始排查是否是redis集群的问题，发现master01节点无法连接，
slave节点也没有被选举成新的master节点，重启master01节点，服务恢复正常。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;复盘&#34;&gt;复盘&lt;/h2&gt;

&lt;p&gt;事情发生后，一直有个点让我想不明白，流量不大的情况下master的一个节点为什么会挂掉？退一万步来讲，
即是挂掉，为何slave节点没有“挺身而出”？&lt;/p&gt;

&lt;p&gt;随即我对redis的日志进行排查，希望能得到什么信息，首先就先查看master01这个挂掉的节点日志，0点27分，
有几条错误日志，这个错误的时间和事发当天0点多的报警时间吻合，而且这个错误的内容直接导致了slave节点失联。&lt;/p&gt;

&lt;p&gt;master01日志&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;17989:M 18 Feb 00:26:49.431 # Failed opening the RDB file root (in server root dir /var/spool/cron) for saving: Permission denied
17989:M 18 Feb 00:26:49.432 # Failed opening the RDB file root (in server root dir /var/spool/cron) for saving: Permission denied
17989:M 18 Feb 00:27:49.906 # Disconnecting timedout slave: SLAVE01IP:PORT
17989:M 18 Feb 00:27:49.906 # Connection with slave SLAVE01IP:PORT lost.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;slave01日志&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;4720:S 18 Feb 00:27:49.908 # Connection with master lost.
4720:S 18 Feb 00:27:49.908 * Caching the disconnected master state.
4720:S 18 Feb 00:27:50.144 * Connecting to MASTER MASTER01IP:PORT
4720:S 18 Feb 00:27:50.144 * MASTER &amp;lt;-&amp;gt; SLAVE sync started
4720:S 18 Feb 00:27:50.146 * Non blocking connect for SYNC fired the event.
4720:S 18 Feb 00:27:50.147 * Master replied to PING, replication can continue...
4720:S 18 Feb 00:27:50.149 * (Non critical) Master does not understand REPLCONF listening-port: -NOAUTH Authentication required.
4720:S 18 Feb 00:27:50.150 * (Non critical) Master does not understand REPLCONF capa: -NOAUTH Authentication required.
4720:S 18 Feb 00:27:50.150 * Trying a partial resynchronization (request 005a426e630acfa4a64a082b02bb97cb8a0256ad:3731868328).
4720:S 18 Feb 00:27:50.151 # Unexpected reply to PSYNC from master: -NOAUTH Authentication required.
4720:S 18 Feb 00:27:50.151 * Discarding previously cached master state.
4720:S 18 Feb 00:27:50.151 * Retrying with SYNC...
4720:S 18 Feb 00:27:50.153 # MASTER aborted replication with an error: NOAUTH Authentication required.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;上网一查，原来是被攻击了，攻击者连上了redis，然后利用redis的config set dir的漏洞，尝试去注入恶意执行代码到系统的crontab中执行，
幸亏我们是使用非root用户启动，攻击者的攻击被系统权限给阻止了。&lt;/p&gt;

&lt;p&gt;redis的这个漏洞应该大家都知道，也包括我们，当初在部署redis集群的时候，就已经把服务器公网IP去掉，只允许应用在内网访问，
没想到也竟然会出这样的事情，难道是受到阿里云同机房下的其他账户机器的攻击？&lt;/p&gt;

&lt;p&gt;我带着疑问向阿里云提交了工单，回复是:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;您好 内网的默认策略是内网入方向 拒绝所有，出方向允许所有；&lt;/p&gt;

&lt;p&gt;1 如果你是经典网络 您设置入方向允许0.0.0.0 的话 经典网络的内网都可以访问您的服务器了&lt;/p&gt;

&lt;p&gt;2 同一安全组设置内网拒绝0.0.0.0  也是可以通的，请您知晓&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;我一直以为阿里云会自动隔离不同账户下的内网网络，防火墙上设置的内网允许我还以为是针对自己的机器的，
这下就栽了跟头，使用阿里云的其他同学要注意下了，看看自己的redis有没有限制好内网网络的权限了，
不然的话，很容易被内网下的其他账户的机器攻击。&lt;/p&gt;

&lt;h2 id=&#34;反思&#34;&gt;反思&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;事情本可在影响面没扩大之前得到处理，当天凌晨redis队列突然出现异常时，本应该发现能基础服务的不正常，但是却没引起关注。&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;基础服务监控缺失，连redis接点不可用这么严重的事情都没能第一时间获取信息。&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;redis安全措施没做好，虽然使用了非root用户启动，恶意代码也没能注入成功，但是明知redis这个高危的漏洞，却还是在防火墙配置上留下了漏洞。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;最后的疑问&#34;&gt;最后的疑问&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;为什么slave和master失联后没能被选举成新的master节点?&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;为什么事发时应用没有捕捉到redis的异常错误？我们在本地尝试复现攻击，一旦save失败，
整个cluster立即不可用，所有依赖redis服务均会抛出异常，究竟攻击者对redis执行了什么命令，导致了这个情况？&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>2016年度总结</title>
      <link>http://barbery.me/post/2017-01-02-annual-summary/</link>
      <pubDate>Mon, 02 Jan 2017 22:24:44 +0800</pubDate>
      
      <guid>http://barbery.me/post/2017-01-02-annual-summary/</guid>
      <description>

&lt;h2 id=&#34;工作&#34;&gt;工作&lt;/h2&gt;

&lt;p&gt;今年4月，我放弃了我梦寐以求的remote工作，被朋友拉入了一家创业公司，又重新回到苦逼的加班日子。
我的remote生涯只持续了半年，崇尚自由的我，怎么也没想到我自己会这么果断的离开了remote的生活。
周围的朋友都会问我为什么，答案说出来也有点自我打脸，原因就是工作太清闲了。一天的remote工作，大多数
情况下，基本上只需要2-4个小时就可以完成了。早上10点懒洋洋起床，简单开下早会，边工作边吃早餐，
基本上12点左右就可以完成了一天的工作，剩下的时间一直持续到晚上睡觉，都是打游戏or看电影/连续剧中度过。
我曾经理想的remote状态是，工作之余可以去旅游或者进行我的业余项目，一直到我的业余项目可以支撑起我的生活，
但是我太高估自己的自制力了，在那种极度自由和极多空余时间的remote工作下，我自己制定的目标也被懒惰一点一点侵蚀。
以至于后面我一度非常担心这样下去，会不会自己的技术就止步于此，感觉提前步入的退休的生活。。。&lt;/p&gt;

&lt;p&gt;在这样的担心下，我后面也答应了朋友的邀请，加入了现在这家创业公司。说实话，朋友第一次邀请我加入时我是一点也不感兴趣，
原因在于，我给自己定了一个规矩，不加入那些土老板+传统管理制度的公司，因为我实在无法接受这些“压榨制度”，
后面朋友一再承诺，老板会放权给他管理我们技术部门，我才加入了他们，负责技术架构以及带我们技术团队。
和很多创业公司一样，后面半年一直处于疯狂加班上线的状态。朋友的承诺没多久也成一句空谈，打卡，
要求我尽可能分配多任务给下属，让他们多加班给老板看。这也一度让我深思，深思为什么会这样，
我真的无法接受这种无意义的作秀。我和朋友的管理方式，有着诸多冲突，真的让我有点不适应，孰对孰错，待明年再来判定。&lt;/p&gt;

&lt;p&gt;今年写了几个lib，但是star都不多，哎，我的100个star的项目何时才能实现。&lt;/p&gt;

&lt;p&gt;人就是这么奇怪，闲的时候想忙一点，忙的时候又想闲一点，今年似乎就是一个这么轮回。&lt;/p&gt;

&lt;p&gt;展望明年，让自己归零，重新学习管理团队，重新上路。&lt;/p&gt;

&lt;h2 id=&#34;生活&#34;&gt;生活&lt;/h2&gt;

&lt;p&gt;今年的生活过得太差了，原本和朋友定好今年6月去泰国学潜水，由于工作的原因，没能成行，太遗憾了。
运动量比之前差了好多个量级，基本都没运动了，公司周围没有运动的地方，之前在唯品会的时候还能跑跑步，
在这边就只能在公司里走动走动了。&lt;/p&gt;

&lt;p&gt;今年体检的时候，测出了一个绝症&amp;mdash;慢性咽喉炎，上网搜了下，这个病无法根治，我又不抽烟，不知道是广州的空气差了，
还是我的过敏性鼻炎引起的。今年买了房子，看看明年能不能装修好搬过去住，在小区里起码还可以跑跑步。
身体是革命的本钱，丢了身体赚再多钱也是徒劳。&lt;/p&gt;

&lt;p&gt;展望明年，多运动，实在不行就买点健身器材丢在公司里；去一次旅游，这次辞职都要去，谁都不能阻止我了；
如果还能有点闲钱买车就好了；&lt;/p&gt;

&lt;h2 id=&#34;投资&#34;&gt;投资&lt;/h2&gt;

&lt;p&gt;今年的收益不佳，只有5%，基本上都是靠中国核建这个新股的收益支撑的。
今年后半年开始，发新股的频率越来越快，A股也在快速扩容，真应了那句话，“垃圾股无限供应，蓝筹股就这么几支”，
未来行情可能就要转向蓝筹了。&lt;/p&gt;

&lt;p&gt;展望明年，上次5000点之后，不知道又要横盘到什么时候了，明年逢高减持，网格交易，继续打新。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>分享一个ngrok的免费server</title>
      <link>http://barbery.me/post/2016-08-21-%E5%88%86%E4%BA%AB%E4%B8%80%E4%B8%AAngrok%E7%9A%84%E5%85%8D%E8%B4%B9server/</link>
      <pubDate>Sun, 21 Aug 2016 11:02:31 +0800</pubDate>
      
      <guid>http://barbery.me/post/2016-08-21-%E5%88%86%E4%BA%AB%E4%B8%80%E4%B8%AAngrok%E7%9A%84%E5%85%8D%E8%B4%B9server/</guid>
      <description>&lt;p&gt;ngrok是一个开源的内网穿透的工具，简单点说就是解决外网访问内网的问题，你可以把外网的80端口随意绑定到
内网的某个端口上，日常开发中多用于调试微信支付或者微信的测试公众号。&lt;/p&gt;

&lt;p&gt;虽说ngrok是开源的，但是还是需要一个server端去做转发，如果自己搞就太麻烦了，这里推荐一个不错的免费ngrok server
(&lt;a href=&#34;http://www.ngrok.cc/&#34;&gt;http://www.ngrok.cc/&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;注册一个账号，登陆进去就可以创建一个穿透的隧道，把需要绑定的信息填写好，就会自动生成一个clientid，
把客户端下载到本地解压出来，执行&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;./sunny clientid {你的clientid}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;启动完毕后，你会看到有个&lt;a href=&#34;http://127.0.0.1:4040/http/in&#34;&gt;http://127.0.0.1:4040/http/in&lt;/a&gt; 的地址，这个是ngrok的web管理界面，
可以看到所有的request和response，是不是很方便呐！&lt;/p&gt;

&lt;p&gt;目前ngrok还没能设置以daemon的方式启动，不过我们可以用别的方法来实现在后台运行，只要把ngrok的日志输出重定向一下，
就可以使用nohup命令来启动，例如这样：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;nohup ./sunny -log=stdout &amp;gt; /dev/null &amp;amp;
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>推荐几个保险</title>
      <link>http://barbery.me/post/2016-07-10-%E6%8E%A8%E8%8D%90%E5%87%A0%E4%B8%AA%E4%BF%9D%E9%99%A9/</link>
      <pubDate>Sun, 10 Jul 2016 16:28:38 +0800</pubDate>
      
      <guid>http://barbery.me/post/2016-07-10-%E6%8E%A8%E8%8D%90%E5%87%A0%E4%B8%AA%E4%BF%9D%E9%99%A9/</guid>
      <description>

&lt;p&gt;今天我们来聊聊保险，保险这个东西，可以说谁都懂，也可以说谁都不懂。
懂的是，大家都知道保险是个什么东西；不懂的是虽然大家都知道，却很少人真正的去运用保险来保障自己的生活。&lt;/p&gt;

&lt;p&gt;究竟什么是保险？维基百科对保险的定义如下：&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;保险，在法律和经济学意义上，是一种风险管理方式，主要用于经济损失的风险。保险被定义为通过缴纳一定的费用，将一个实体潜在损失的风险向一个实体集合的平均转嫁。&lt;/p&gt;

&lt;p&gt;其实通俗地讲，就是一旦加入某个团体，就“一人有难，大家平摊”，是以货币形式平摊的社会风险转嫁机制。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;现在微博，朋友圈各种求助好心人信息不断，一方面说明了疾病/意外带来的风险足矣摧毁正常的家庭，另一方面也说
明大家对风险管理的忽视。&lt;/p&gt;

&lt;p&gt;还有一点是，大家对保险的不信任，特别是老一辈的亲戚朋友，他们的不信任是基于以前保险销售的忽悠上。
我爸妈在九几年的时候，被忽悠买了不少『分红』人寿保险，那时候的人也不懂什么保险条款，只是听销售各种忽悠
在这里提醒大家，要仔细阅读&lt;code&gt;保险合同&lt;/code&gt;，特别是&lt;code&gt;免责条款&lt;/code&gt;，而且最好不要买那些分红险，定期每年交多少，交够XX年那种，
这些保险绝大多数是不值得购买的，除非你能遇到一个很好的条款的保险。普通人家最好购买一年一保的保险，
也就是有效期是1年，每年买一次，这类保险在费用上非常划算，所以这里我&lt;code&gt;特别建议大家，购买一年一保的保险&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;以下推荐几个我自己觉得非常不错的保险给大家，这些保险除了我自己有购买，我还建议家人和周围的朋友购买，
仅供大家参考，如果有更好的保险，欢迎大家推荐给我。。。谢谢~&lt;/p&gt;

&lt;h2 id=&#34;泰康人寿-个人门急诊住院医疗保险&#34;&gt;『泰康人寿』个人门急诊住院医疗保险&lt;/h2&gt;

&lt;p&gt;推荐等级：严重推荐&lt;/p&gt;

&lt;p&gt;购买地址： &lt;a href=&#34;https://baoxian.taobao.com/item.html?id=43439766599&#34;&gt;https://baoxian.taobao.com/item.html?id=43439766599&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;说明：这个保险非常推荐大家购买，如果你们公司没有帮你们购买社保，或者没有商业的补充医疗保险，那么这个将是你的最优选择。
只要去定点医院看病只要超过100元，符合医保理赔范围的部分都可以申请理赔，无论是意外还是疾病。一年累计赔付3000元，额满即止。
就拿我自己来说，上次治疗牙齿刷医保卡花了800多块，扣掉100元免赔额和部分自费的药物，最后获得了400多元的理赔。
理赔非常方便，理赔金额500元以内的话，无需邮寄发票，只要在微信公众号上传下身份证和看病的发票信息就可以了，
理赔的钱直接打到支付宝里面。&lt;/p&gt;

&lt;h2 id=&#34;太平洋保险-全年综合意外险&#34;&gt;『太平洋保险』全年综合意外险&lt;/h2&gt;

&lt;p&gt;推荐等级：严重推荐&lt;/p&gt;

&lt;p&gt;购买地址： &lt;a href=&#34;https://baoxian.taobao.com/item.htm?id=526471633873&#34;&gt;https://baoxian.taobao.com/item.htm?id=526471633873&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;说明：没什么可说的，这个意外险价格非常实惠，购买3份，也就是90元，可以保障30W身故，3W医疗，150元/天住院津贴。&lt;/p&gt;

&lt;h2 id=&#34;太平洋保险-综合医疗保险&#34;&gt;『太平洋保险』综合医疗保险&lt;/h2&gt;

&lt;p&gt;推荐等级：推荐&lt;/p&gt;

&lt;p&gt;购买地址：&lt;a href=&#34;https://baoxian.taobao.com/item.htm?id=530444329791&#34;&gt;https://baoxian.taobao.com/item.htm?id=530444329791&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;说明：这个保险的费用相对前面推荐那几个，可能稍微贵一点，但是也是非常实用的一个保险，可以说综合了前面2个保险。
这个保险也可以门诊理赔，而且每年可以赔付的额度高达1W，缺点是每年只能理赔10次，除了这个，还包含有20W的意外保险，重疾保险，
是一款综合性非常强的保险，不过大家需要注意的是，这个保险只保&lt;code&gt;职业为1-3类的企业在职员工，且参加城镇职工社会基本医疗保险的人员&lt;/code&gt;
所以购买前请仔细咨询客服看看是否符合购买资格。&lt;/p&gt;

&lt;h2 id=&#34;百年人寿-意外猝死伤害保险&#34;&gt;『百年人寿』意外猝死伤害保险&lt;/h2&gt;

&lt;p&gt;推荐等级：普通推荐&lt;/p&gt;

&lt;p&gt;购买地址：&lt;a href=&#34;https://baoxian.taobao.com/item.htm?id=522212354329&#34;&gt;https://baoxian.taobao.com/item.htm?id=522212354329&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;说明：这个仅对程序猿同行推荐，猝死目前的法定是不算意外也不算疾病的，对于我们这个行业来说，猝死风险还不少，建议还是买个护身。
20元买不了上当，买不了吃亏。&lt;/p&gt;

&lt;h2 id=&#34;众安保险-高端住院险&#34;&gt;『众安保险』高端住院险&lt;/h2&gt;

&lt;p&gt;推荐等级：推荐&lt;/p&gt;

&lt;p&gt;购买地址： &lt;a href=&#34;https://baoxian.taobao.com/item.html?id=522543831697&#34;&gt;https://baoxian.taobao.com/item.html?id=522543831697&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;说明：这个保险的定位是高端的住院医疗保险，也就是保的是极端的大病，需要花好几十万的治疗费用这种，
这个保险的最大优势在于，自费的治疗项目也可以理赔，超出1W部分，100%给付，不超过30万/年。
据我不负责任的了解，大病通常都需要用到进口药物，而进口药物通常价格昂贵，且不在医保范围呢，而这个保险
恰好可以满足我们的需求。有的朋友可能说1W的免赔额太高了，所以这里推荐结合上面的保险来购买，例如上面推荐的综合医疗保险。&lt;/p&gt;

&lt;h2 id=&#34;汇总&#34;&gt;汇总&lt;/h2&gt;

&lt;p&gt;&lt;img src=&#34;http://ww2.sinaimg.cn/large/6915c7dcgw1f5oz7go31rj20uy0lxjv7.jpg&#34; alt=&#34;汇总&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;请大家购买时看清楚保险条款，特别是免赔条款&lt;/code&gt;，有什么细节问题可以咨询客服，祝大家平平安安，永不出险。&lt;/p&gt;

&lt;h2 id=&#34;最后解释下保险的一些常见问题&#34;&gt;最后解释下保险的一些常见问题。&lt;/h2&gt;

&lt;h3 id=&#34;保险理赔能不能累加&#34;&gt;保险理赔能不能累加？&lt;/h3&gt;

&lt;p&gt;简单的说，意外保险可以，补贴型的例如住院津贴这类也可以，例如你在A公司买了10W的身故意外险，B公司买了20W，如果不幸意外身故，则可以获得A公司的10W+B公司的20W=一共30W的理赔。
但是医疗保险就不可以，如果把上面的例子改为是医疗保险，如果发生了20W的住院理赔，你可以找B公司理赔20W，但是不能找A公司理赔了，因为理赔的额度不能超出实际的费用，如果你的理赔是30W，则可以向AB公司一起申请理赔。&lt;/p&gt;

&lt;h3 id=&#34;免赔额&#34;&gt;免赔额？&lt;/h3&gt;

&lt;p&gt;免赔额就是这个额度以内，保险公司不理赔，所以理赔金额=（申请理赔的金额-免赔额）* 理赔比例&lt;/p&gt;

&lt;h3 id=&#34;免赔额抵扣&#34;&gt;免赔额抵扣？&lt;/h3&gt;

&lt;p&gt;这个是非常重要的东西，例如我上面推荐的高端住院险，这个保险的免赔额高达1W元，如果没有一些免赔额低的保险来做补充，
买这个保险则是非常吃亏的。因为这1W的免赔额是可以和别的保险抵扣的（注意：政府的医保不能抵扣免赔额），
假如某人不幸得了大病住院消费了20W元，如果此人只是购买了高端住院险，只能理赔20W-1W=19W，还需要自己掏腰包1W元，
如果他购买的是综合医疗保险+高端住院险这个组合，则可以通过综合医疗住院险来报销1W（或者更多），剩下的部分可以通过高端住院险来报销，
原因在于前面保险公司报销的部分是可以抵扣后面报销的保险的免赔额的，也就是20W都可以理赔，无需自费一分钱。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>说说用docker-swarm部署集群的一些问题</title>
      <link>http://barbery.me/post/2016-04-20-%E8%AF%B4%E8%AF%B4%E7%94%A8docker-swarm%E9%83%A8%E7%BD%B2%E9%9B%86%E7%BE%A4%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/</link>
      <pubDate>Wed, 20 Apr 2016 11:18:13 +0000</pubDate>
      
      <guid>http://barbery.me/post/2016-04-20-%E8%AF%B4%E8%AF%B4%E7%94%A8docker-swarm%E9%83%A8%E7%BD%B2%E9%9B%86%E7%BE%A4%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/</guid>
      <description>&lt;p&gt;部署比较简单，这点官网文档说的非常详细，这里我就不重复叙述了，大家可以去看看&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://docs.docker.com/swarm/install-manual/&#34;&gt;https://docs.docker.com/swarm/install-manual/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;说说过程中遇到的问题，也希望后来者可以少踩坑。。。&lt;/p&gt;

&lt;p&gt;首先就是部署前，要把docker engine配置到监听swarm的端口&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;sudo vim /etc/default/docker&lt;/p&gt;

&lt;p&gt;#追加配置到DOCKER_OPTS配置项&lt;/p&gt;

&lt;p&gt;DOCKER_OPTS=&amp;ldquo;-H 0.0.0.0:2375 -H unix:///var/run/docker.sock&amp;rdquo;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;docker的id冲突时需要删掉key文件，重启service就可以重新生成&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt; rm /etc/docker/key.json&lt;/p&gt;

&lt;p&gt;sudo service docker restart&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;还有一个就是discovery服务的话，consul目前还不支持多个节点ip，所以如果你有多个manage的节点也只能连一个consul的节点。。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>迟到的2015总结</title>
      <link>http://barbery.me/post/2016-02-15-%E8%BF%9F%E5%88%B0%E7%9A%842015%E6%80%BB%E7%BB%93/</link>
      <pubDate>Mon, 15 Feb 2016 17:47:48 +0000</pubDate>
      
      <guid>http://barbery.me/post/2016-02-15-%E8%BF%9F%E5%88%B0%E7%9A%842015%E6%80%BB%E7%BB%93/</guid>
      <description>

&lt;h2 id=&#34;工作&#34;&gt;工作&lt;/h2&gt;

&lt;p&gt;今年在工作上真是折腾不少，回顾今年，主要做了以下几点值得一谈的事情&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;基本完成了微信活动开发的框架，可以大部分的复用活动逻辑，这个框架的建成，提高了活动开发效率，可以应对公司大促时带来的活动开发的压力。&lt;/li&gt;
&lt;li&gt;在部门推广vagrant统一团队开发环境，统一我们微信组的开发环境&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;进入8月份后，部门整合，微信组要被拆分成2部分合并到其他组里面去，导致多名同事出走，考虑到晋升的不稳定因素太多，我也决定出走，并于11月从VIP离职。今年在VIP的时光真的很开心，可以说是我目前为止职业生涯中最快乐的一段时光。我记得15年过完春节回来上班不久，我们组的工位就从移动楼2楼搬迁到图书馆的小房间里面，大家在小房间内一起加班，一起开黑，一起吃下午茶，我真的很享受小团队这种感觉。。。&lt;/p&gt;

&lt;p&gt;离开VIP后，我加盟一家remote的小公司。自从看了《rework2》之后，就一直对remote这种工作方式很憧憬，很想尝试一下。距离目前为止，我已从事remote的工作3个月了，刚开始的时候还是挺不适应的，觉得好累，因为没有客观的上下班时间，虽然自己规定了工作时间，但是人就是懒惰，总想着把工作往后推，这就导致了工作时间效率不高，本该休息的时间，却被拿来赶工作，所以感觉就好累，好像创业一样，感觉一直都在上班。。。&lt;/p&gt;

&lt;p&gt;回顾去年的工作总结中的期望，今年没能完成一个100 star的开源项目，所以今年继续继承这个期望，希望能做出些有价值的开源项目。。。&lt;/p&gt;

&lt;h2 id=&#34;生活&#34;&gt;生活&lt;/h2&gt;

&lt;p&gt;今年在生活上比较顺利，去了马来西亚和越南旅游，在VIP的时候，常常和同事去跑步，游泳。不过最近加入remote后，有更宅的倾向，所以今年的目标是多运动，多出去外面走走，多社交朋友。&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;h2 id=&#34;投资&#34;&gt;投资&lt;/h2&gt;

&lt;p&gt;今年上半年，走了一波小牛市，可惜活生生坐了一次过山车，『会买是徒弟，会卖才是师傅』终于体会到这句话的涵义了。&lt;/p&gt;

&lt;p&gt;2015年的投资收益率为25%，虽然不高，但是我对这个收益率还是挺满意的。&lt;/p&gt;

&lt;p&gt;对于明年的期望，策略主要以谨慎为主，被动补仓。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>说说怎么给virtualbox扩容</title>
      <link>http://barbery.me/post/2015-11-19-%E8%AF%B4%E8%AF%B4%E6%80%8E%E4%B9%88%E7%BB%99virtualbox%E6%89%A9%E5%AE%B9/</link>
      <pubDate>Thu, 19 Nov 2015 16:39:13 +0000</pubDate>
      
      <guid>http://barbery.me/post/2015-11-19-%E8%AF%B4%E8%AF%B4%E6%80%8E%E4%B9%88%E7%BB%99virtualbox%E6%89%A9%E5%AE%B9/</guid>
      <description>&lt;p&gt;前几天用vagrant+virtualbox+docker 来搭建本地开发环境，由于要导入的SQL太大，virtualbox的容量被挤爆了，而vagrant创建时似乎是不能指定容量大小的，系统默认分配的16G明显不够用。。。上网找了下，有些教程操作过程中报错，没法进行下去，有些教程又很长，看起来很复杂。。。自己折腾了下，其实非常简单。&lt;/p&gt;

&lt;p&gt;首先找到自己box的安装位置，默认应该都是安装在 ~/VirtualBox VMs/default-xxxxxxx/ 下的，打开命令行终端，进入目录下。。。如果你发现你的xxxx.vdi格式的话，那么恭喜你，这个格式扩容很简单，直接执行&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;$&amp;gt; VBoxManage modifyhd xxxx.vdi  &amp;ndash;resize 30000&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;后面30000代表30000MB约等于30G，根据自己的实际需要调整。&lt;/p&gt;

&lt;p&gt;实际上，我们看到的文件格式很大概率是xxxxxx.vmdk，不用怕，也很简单。。。&lt;/p&gt;

&lt;p&gt;首先，先利用virtualbox提供的工具，将其格式转换成vdi。。。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;$&amp;gt; VBoxManage clonehd xxxx.vmdk xxxx.vdi &amp;ndash;format=vdi&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;等待一会儿，转换完成后，就会在目录上出现一个xxxx.vdi的文件，这个文件就是克隆自你原来的那个文件，只是把格式换成了vdi，再执行上面我说的扩容的命令，就可以实现这个vdi的容量扩容。&lt;/p&gt;

&lt;p&gt;扩容完成后，打开virtualbox GUI程序（就是点击virtualbox图标运行界面程序），找到你刚刚扩容的那个box，右键设置-&amp;gt;储存，在储存器 IDE Controller那里点击添加磁盘&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://ww2.sinaimg.cn/large/6915c7dcgw1ey6dbhb450j207x067mxg.jpg&#34; alt=&#34;图片&#34; /&gt;&lt;/p&gt;

&lt;p&gt;然后选择”选择现有虚拟盘”选项，找到刚刚生成的vdi文件，添加进去，然后点击之前的盘符，点击下方的删除磁盘的ico删掉即可（请先自行备份之前的文件）&lt;/p&gt;

&lt;p&gt;还有一点，就是要保证添加进来的vdi磁盘设置如下所示。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://ww3.sinaimg.cn/large/6915c7dcgw1ey6dfr4ckfj207x0650t4.jpg&#34; alt=&#34;图片&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>mosh - 妈妈再也不用担心我ssh连接断开了</title>
      <link>http://barbery.me/post/2015-09-25-mosh-%E5%A6%88%E5%A6%88%E5%86%8D%E4%B9%9F%E4%B8%8D%E7%94%A8%E6%8B%85%E5%BF%83%E6%88%91ssh%E8%BF%9E%E6%8E%A5%E6%96%AD%E5%BC%80%E4%BA%86/</link>
      <pubDate>Fri, 25 Sep 2015 09:35:01 +0000</pubDate>
      
      <guid>http://barbery.me/post/2015-09-25-mosh-%E5%A6%88%E5%A6%88%E5%86%8D%E4%B9%9F%E4%B8%8D%E7%94%A8%E6%8B%85%E5%BF%83%E6%88%91ssh%E8%BF%9E%E6%8E%A5%E6%96%AD%E5%BC%80%E4%BA%86/</guid>
      <description>

&lt;h2 id=&#34;mosh是什么&#34;&gt;mosh是什么&lt;/h2&gt;

&lt;p&gt;最近了解到mosh这个神器，免费开源产品，用来代替ssh连接的，它支持UDP协议的连接，支持SSH key验证。&lt;/p&gt;

&lt;p&gt;你可能会问，说了那么多，用mosh究竟有什么好处？&lt;/p&gt;

&lt;p&gt;像我这样，blog搭在国外服务器上，常常需要ssh登陆国外的服务器，然而这速度，你懂的，非常不稳定，在事情做到一半的时候连接断掉了，真的想死有木有。。。mosh是基于UDP协议的，断开后都可以自动重连，重连还是连接回上次的session哦，不是新的session，也就是看起来和没断开过连接一样，像MacBook这样，合起来待机再也不用担心断开连接了。。。&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;h2 id=&#34;如何安装&#34;&gt;如何安装&lt;/h2&gt;

&lt;p&gt;好了好了，说说怎么用吧，使用mosh的话，需要装mosh的客户端和mosh的服务端。。。&lt;/p&gt;

&lt;p&gt;服务端的话很简单，直接源安装就好了，ubuntu/debian系列直接&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;sudo apt-get install mosh&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;客户端的话，目前官方还不支持windows，目前只支持linux和mac os，不过有个chrome的mosh插件，windows下安装可以曲线救国&lt;a href=&#34;https://chrome.google.com/webstore/detail/mosh/ooiklbnjmhbcgemelgfhaeaocllobloj&#34;&gt;https://chrome.google.com/webstore/detail/mosh/ooiklbnjmhbcgemelgfhaeaocllobloj&lt;/a&gt;。另外，可以从&lt;a href=&#34;https://mosh.mit.edu/#getting&#34;&gt;https://mosh.mit.edu/#getting&lt;/a&gt; 这里面下载客户端，和查看怎么安装服务端。&lt;/p&gt;

&lt;h2 id=&#34;如何使用&#34;&gt;如何使用 &lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;mosh USERNAME@HOST [&amp;ndash;ssh=&amp;ldquo;ssh -p 2222&amp;rdquo;]&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;如果端口非22的话，可以使用后面中括号的参数来指定端口。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>使用sublime text3 打造最佳PHP开发工具</title>
      <link>http://barbery.me/post/2015-07-18-%E4%BD%BF%E7%94%A8sublimetext3%E6%89%93%E9%80%A0%E6%9C%80%E4%BD%B3PHP%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/</link>
      <pubDate>Sat, 18 Jul 2015 18:28:22 +0000</pubDate>
      
      <guid>http://barbery.me/post/2015-07-18-%E4%BD%BF%E7%94%A8sublimetext3%E6%89%93%E9%80%A0%E6%9C%80%E4%BD%B3PHP%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/</guid>
      <description>&lt;p&gt;我就不班门弄虎了，国外有个博主就写得非常不错，我的配置很多都参考这篇文章的，有需要的同学强烈推荐看下，虽然是英文，但是比较浅显易懂，博主还配上GIF动画，大家应该能大致看懂，我就懒得翻译了。。。有什么不懂的可以留言。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://mattstauffer.co/blog/sublime-text-3-for-php-developers&#34;&gt;https://mattstauffer.co/blog/sublime-text-3-for-php-developers&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>golang有没有必要传递map指针？</title>
      <link>http://barbery.me/post/2015-05-21-golang%E6%9C%89%E6%B2%A1%E6%9C%89%E5%BF%85%E8%A6%81%E4%BC%A0%E9%80%92map%E6%8C%87%E9%92%88%EF%BC%9F/</link>
      <pubDate>Thu, 21 May 2015 22:43:07 +0000</pubDate>
      
      <guid>http://barbery.me/post/2015-05-21-golang%E6%9C%89%E6%B2%A1%E6%9C%89%E5%BF%85%E8%A6%81%E4%BC%A0%E9%80%92map%E6%8C%87%E9%92%88%EF%BC%9F/</guid>
      <description>&lt;p&gt;好久没写GO了，今天在function中传递map指针的时候，犹豫了一下，是否真的有必要传递map指针？按道理来说，这个问题是毫无疑问的回答是，因为传递指针的好处就是速度快，占用内存少。但是，我隐隐约约记得，GO中的map和slice是天然的引用类型，什么意思？就是无论你怎么赋值，在GO的内部编译执行的时候，都是指针传递，并不会发生实质的内容拷贝。。。&lt;/p&gt;

&lt;p&gt;晚上回来的路上就一直在想这个问题。。。觉得模模糊糊，不太确定。回到家立即写个demo来证明一下，直接贴代码：&lt;/p&gt;

&lt;p&gt;也可以到这里在线运行：&lt;a href=&#34;http://play.golang.org/p/0VHB4e9BJY&#34;&gt;http://play.golang.org/p/0VHB4e9BJY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;输出结果是：&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;map[xxx:123 xxx222:xxx xxx333:xxx]&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;结果说明了“GO中的map和slice是天然的引用类型，什么意思？就是无论你怎么赋值，在GO的内部编译执行的时候，都是指针传递，并不会发生实质的内容拷贝”同时使用这些引用类型的变量也需要小心副作用，因为一修改，就会影响所有使用这个参数的代码。。。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>使用vagrnat打造团队跨平台开发环境</title>
      <link>http://barbery.me/post/2015-05-17-%E4%BD%BF%E7%94%A8vagrnat%E6%89%93%E9%80%A0%E5%9B%A2%E9%98%9F%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</link>
      <pubDate>Sun, 17 May 2015 18:34:30 +0000</pubDate>
      
      <guid>http://barbery.me/post/2015-05-17-%E4%BD%BF%E7%94%A8vagrnat%E6%89%93%E9%80%A0%E5%9B%A2%E9%98%9F%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</guid>
      <description>&lt;p&gt;额，本来这个PPT是做来在公司内部分享的，但是由于某些原因，可能没法在公司内部分享了。分享上来，权当留个纪念~~~&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.slideshare.net/ssuser773636/vagrant-48243103&#34;&gt;http://www.slideshare.net/ssuser773636/vagrant-48243103&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;需要翻墙才能看到。。。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>修改mysql配置衍生的一系列问题</title>
      <link>http://barbery.me/post/2015-04-27-%E4%BF%AE%E6%94%B9mysql%E9%85%8D%E7%BD%AE%E8%A1%8D%E7%94%9F%E7%9A%84%E4%B8%80%E7%B3%BB%E5%88%97%E9%97%AE%E9%A2%98/</link>
      <pubDate>Mon, 27 Apr 2015 23:30:54 +0000</pubDate>
      
      <guid>http://barbery.me/post/2015-04-27-%E4%BF%AE%E6%94%B9mysql%E9%85%8D%E7%BD%AE%E8%A1%8D%E7%94%9F%E7%9A%84%E4%B8%80%E7%B3%BB%E5%88%97%E9%97%AE%E9%A2%98/</guid>
      <description>&lt;p&gt;今天有空，想调优下mysql的参数，又想偷懒，就直接使用官方推荐的my-innodb-heavy-4G.cnf配置。。。傻逼了，没备份一些原来的配置，就直接cp -f过去了，后来发现没法启动。。。幸亏本地还有一份，对比了下，发现my-innodb-heavy-4G.cnf的配置少了一部分内容。。。&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;[mysqld]&lt;/p&gt;

&lt;p&gt;user = mysql
pid-file = /var/run/mysqld/mysqld.pid
socket = /var/run/mysqld/mysqld.sock
port = 3306
basedir = /usr
datadir = /var/lib/mysql
tmpdir = /tmp
lc-messages-dir = /usr/share/mysql
skip-external-locking&lt;/p&gt;

&lt;p&gt;bind-address            = 127.0.0.1&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;补上成功启动mysql，但是连接时，发现报错：&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;SQLSTATE[42000]: Syntax error or access violation: 1286 Unknown storage engine &amp;lsquo;InnoDB&amp;rsquo;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;google了下，原来是需要重新做ib_logfile。。。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;sudo service mysql stop&lt;/p&gt;

&lt;p&gt;sudo mv /var/lib/mysql/ib_logfile0 /var/lib/mysql/ib_logfile0.bak&lt;/p&gt;

&lt;p&gt;sudo mv /var/lib/mysql/ib_logfile1 /var/lib/mysql/ib_logfile1.bak&lt;/p&gt;

&lt;p&gt;sudo service mysql start&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;稍等10几秒，重做完启动后就一切正常了。。。&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;最后吐槽下，这不是官方的配置嘛，为什么尼玛就不能直接拿过来用。。。坑~&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>2014年总结</title>
      <link>http://barbery.me/post/2014-12-31-2014%E5%B9%B4%E6%80%BB%E7%BB%93/</link>
      <pubDate>Wed, 31 Dec 2014 22:25:46 +0000</pubDate>
      
      <guid>http://barbery.me/post/2014-12-31-2014%E5%B9%B4%E6%80%BB%E7%BB%93/</guid>
      <description>

&lt;h2 id=&#34;工作&#34;&gt;工作&lt;/h2&gt;

&lt;p&gt;先说说今年的工作情况吧。。年初激情四射，和几位好朋友，满腔热火，砸锅卖铁去创业，势必把O2O果汁店这个idea给做起来。年中，资金耗完，团队各种困难，股东退出，也没洽谈到融资，各种矛盾不如意，最终只能关掉项目，各种各路。回想这次“创业”，有太多不成熟的地方了，首先低估了营销的重要性和难度，其次O2O不是我们的专长，这种需要结合线下推广的业务，我们无一擅长，纯互联网的项目才是我们的主场。也许，我们应该先开果汁店，成功了再O2O，网络只是销售渠道的一个，而不是本末倒置，先做网络，再卖果汁。&lt;/p&gt;

&lt;p&gt;项目失败后，我也一度失去了奋斗的方向，9月份开始，又重新踏上打工的道路，也顺利拿下了许多offer，经过考虑，最终选择了进入唯品会，一边工作积累技术，一边好好考虑，究竟自己想要什么，我憧憬的未来是怎么样的？&lt;/p&gt;

&lt;p&gt;对于15年的展望，努力工作，多写代码，争取做出一个超100个star的开源项目。&lt;/p&gt;

&lt;h2 id=&#34;生活&#34;&gt;生活&lt;/h2&gt;

&lt;p&gt;工作之余，貌似我的生活也太枯燥无味了，平时也不喜欢出去逛，除了有同学/朋友聚会什么的。平时生活的最大乐趣就数去旅游了，每年一度的旅游计划，是属于我自己最盛大的节日了，2014年去了一趟泰国游，现在回想起来，真是爽爆了~。&lt;/p&gt;

&lt;p&gt;自从来了唯品会，偶尔也跟同事跑跑步什么的，坚持运动，健康生活。对于15年的展望，我想说：猿的生命短暂，说不准何时就猝死了，不要浪费自己的时光，也不要只关注自己的工作，多关心朋友、亲人，以后要多点提高自己的生活质量，每天都快乐的活着。&lt;/p&gt;

&lt;p&gt;写完这个计划，我又要开始策划我15年的年度旅游了，哈哈哈，太激动鸟~~&lt;/p&gt;

&lt;h2 id=&#34;投资&#34;&gt;投资&lt;/h2&gt;

&lt;p&gt;最后说说投资吧，真是对不起乡亲父老，今年的上半年都在和朋友创业，除了没收入，没钱继续买股票之前，还要变卖股票，套现一点钱出来维持生活费的开支，以至于后面大涨，我只能感叹再也没有便宜股买了。。。&lt;/p&gt;

&lt;p&gt;今年的总收益率为53%左右，对比上证指数，跑输2%，对比上证50指数，跑输15%。收益竟然还不及我姐姐的账户，我姐姐的账户也是由我操作，风格上和我集中持股不同，比较分散，持有的行业比重最大为银行股，其次为建筑地产，最后为高速铁路，不同行业组合，加上轮涨，反倒成了不错的组合收益。&lt;/p&gt;

&lt;p&gt;自己总结下跑输的原因：&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;下半年突然风格转为牛市，持仓上非常保守，都是高股息的银行股，并没有持有具有牛市大杀器证券股或者保险股；&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;持仓过于集中于一个行业，对于上涨通常都是行业之间轮换的上涨，由于太集中，没办法像其他人那样通过换股操作提高收益率；&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;没有融资，没上杠杆；&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;不管怎么样都好，永远不要忘了自己的出发点，融资这样高风险的事情必须谨慎再谨慎，我不是想通过股市发大财，只是希望可以好好理财，赚点小钱。&lt;/p&gt;

&lt;p&gt;对于15年的投资展望，如果继续上涨，就不再追高买入，转为打新和分级套利操作，两股没有相差30%以上的差价，都不考虑换股的事情。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>《邓普顿教你逆向投资》读后感</title>
      <link>http://barbery.me/post/2014-12-28-%E3%80%8A%E9%82%93%E6%99%AE%E9%A1%BF%E6%95%99%E4%BD%A0%E9%80%86%E5%90%91%E6%8A%95%E8%B5%84%E3%80%8B%E8%AF%BB%E5%90%8E%E6%84%9F/</link>
      <pubDate>Sun, 28 Dec 2014 23:05:52 +0000</pubDate>
      
      <guid>http://barbery.me/post/2014-12-28-%E3%80%8A%E9%82%93%E6%99%AE%E9%A1%BF%E6%95%99%E4%BD%A0%E9%80%86%E5%90%91%E6%8A%95%E8%B5%84%E3%80%8B%E8%AF%BB%E5%90%8E%E6%84%9F/</guid>
      <description>&lt;p&gt;最近股市大涨，人心惶惶~~ 除了叹息便宜的股票一去不复返，还有就是烦恼后续资金怎么买的问题。。。&lt;/p&gt;

&lt;p&gt;周末有空在家，重新读了《邓普顿教你逆向投资》一书，上次阅读此书，已是大学的时候了，再次阅读，让我最近躁动不安的心一下安定了下来。。。&lt;/p&gt;

&lt;p&gt;好记忆不如烂笔头，随便写写，权当是流水账吧~&lt;/p&gt;

&lt;p&gt;这本书的主题思想，简单而言就是一句话：“别人贪婪，我恐惧；别人恐惧，我贪婪”，邓普顿老先生用自身的经历来告诉我们，在极度的悲观的时候坚定买入，买入那些价格和价值严重错误的“低价股”。邓普顿先生的观点和巴菲特、彼得林奇的观点不谋而合，都是通过选择少人关注的冷门股，等待严重低估的价格买入，待高估或者找到下一个更低估的股票时卖出。结合自身的情况，自己过去几年做得还不够好，往往加仓时都是反弹的时候，过多的预测未来的走势，而忽视了往往内心最恐惧的时候，觉得明天还会有更低的价格的时候，往往就是最佳的买点。不要忽视买入成本价的那10%，经过复利的常年累计，最终可以放大到很大的差距。&lt;/p&gt;

&lt;p&gt;除此之外，作者还提到了应该全球化投资，一个好的投资国家，应该是高储蓄率，外贸顺差，赤字少/有盈余，负债低。邓普顿先生，用数据说明了全球国家的股市涨跌轮着大小年，今年指数涨得最好的国家，往往是后面几年涨得最差的，而涨得最差的，往往是后面几年涨得最好的，投资者应该有全球视野，在全球范围内狩猎错杀的“低价股”。&lt;/p&gt;

&lt;p&gt;在谈到何时卖出时，邓普顿先生的回答是，等待价格回归价值时卖出，而不是等到价格严重高于价值时卖出，他认为这是赌博而不是投资，或者找到比持有的股票低估50%的股票时卖出换入更低估的股票。书中列举了邓普顿先生清仓日本股市时，东京指数PEG为2.1倍。&lt;/p&gt;

&lt;p&gt;最后，书中谈到债券的问题，在2000年美国互联网泡沫的时候，他建议大家买入债券，理由是，当泡沫破裂，股市大跌会导致经济衰退，政府为了重振紧急，必定会降息，从而导致债券获得高于票面的收益率，此时再卖出债券，待最悲观的时刻到来，买入被严重错杀的“低价股”。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>